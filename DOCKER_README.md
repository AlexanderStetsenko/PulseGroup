# PulseGroup Bot - Docker Deployment

## ?? ?????? ???? ? Docker

### ??????? ?????

1. **?????????? ???????????:**
```bash
git clone <your-repo-url>
cd PulseGroup
```

2. **???????? ?????????? ??? ??????:**
```bash
mkdir data
```

3. **????????? ??? ????? Docker Compose:**
```bash
docker-compose up -d
```

### ??????? Docker Compose

**?????? ????:**
```bash
docker-compose up -d
```

**????????? ????:**
```bash
docker-compose down
```

**???????? ?????:**
```bash
docker-compose logs -f
```

**?????????? ????:**
```bash
docker-compose restart
```

**?????????? ? ??????:**
```bash
docker-compose up -d --build
```

---

## ?? ?????????????? ?????? (??? Docker Compose)

### ?????? ??????:
```bash
docker build -t pulsegroup-bot .
```

### ?????? ??????????:
```bash
docker run -d \
  --name pulsegroup-bot \
  --restart unless-stopped \
  -v $(pwd)/data:/app/data \
  pulsegroup-bot
```

### ???????? ?????:
```bash
docker logs -f pulsegroup-bot
```

### ????????? ??????????:
```bash
docker stop pulsegroup-bot
```

### ???????? ??????????:
```bash
docker rm pulsegroup-bot
```

---

## ?? ????????? ??????

??? ?????? ???? ??????????? ? ?????????? `./data`:

```
data/
??? pricing_config.json    # ????????? ???
??? bot_statistics.json    # ?????????? ????
```

### Backup ??????:
```bash
# ??????? backup
tar -czf backup-$(date +%Y%m%d).tar.gz data/

# ???????????? backup
tar -xzf backup-20250115.tar.gz
```

---

## ?? ?????????? ????

1. **?????????? ?????????:**
```bash
docker-compose down
```

2. **???????? ???:**
```bash
git pull
```

3. **???????????? ? ?????????:**
```bash
docker-compose up -d --build
```

**?????:** ????? `pricing_config.json` ? `bot_statistics.json` ? ?????????? `data/` ??????????!

---

## ?? ?????????? ?????????

?? ?????? ????????? ???? ????? ?????????? ????????? ? `docker-compose.yml`:

```yaml
environment:
  - TZ=Europe/Warsaw              # ??????? ????
  - DOTNET_ENVIRONMENT=Production # ????????? .NET
```

---

## ?? ??????????

### ???????? ??????? ??????????:
```bash
docker ps
```

### ???????? ????????????? ????????:
```bash
docker stats pulsegroup-bot
```

### ???? ? ????????? (??? ???????):
```bash
docker exec -it pulsegroup-bot /bin/bash
```

---

## ??? ?????????? ???????

### ????????: ????????? ?? ???????????
**???????:**
```bash
# ????????? ????
docker-compose logs

# ????????? ??????
docker-compose ps
```

### ????????: ??? ?? ????????? ??????
**???????:**
```bash
# ????????? ????? ??????? ? ?????????? data
chmod -R 755 data/

# ?????????, ??? volume ?????????????
docker inspect pulsegroup-bot | grep Mounts -A 10
```

### ????????: ????????? ???????? (???)
**???????:**
????????? ??? ???????? ?? UTF-8, ?? ???? ???????? ????????:
```bash
# ??????????? ?????
docker-compose build --no-cache
docker-compose up -d
```

### ????????: ????? ???????? Bot Token
**???????:**
1. ?????????????? `PulseGroup/Configuration/BotConfig.cs`
2. ???????????? ?????:
```bash
docker-compose up -d --build
```

---

## ?? ?????? ??????

????? ????????????? ??? ???????????? ???????:
- **SDK ????? (?????? ??? ??????):** ~2GB
- **Runtime ????? (?????????):** ~200MB

---

## ?? ????????????

### ????????????:

1. **?? ????????? Bot Token ? Git:**
   - ??????????? ?????????? ????????? ??? secrets

2. **????????? ?????????? ?????:**
```bash
docker-compose pull
docker-compose up -d
```

3. **?????????? ?????? ? ?????????? data:**
```bash
chmod 700 data/
```

---

## ?? ????

### ????????? ????????? ?????:
? `docker-compose.yml` ????????:
```yaml
environment:
  - DOTNET_LOGGING_LEVEL=Debug
```

### ?????????? ????? ? ????:
```bash
docker-compose logs > logs/bot-$(date +%Y%m%d).log
```

---

## ?? Production Deployment

??? production-????????? ?????????????:

1. **???????????? Docker Secrets ??? Bot Token**
2. **????????? ?????????????? ??????????:**
```yaml
restart: always
```

3. **???????? healthcheck:**
```yaml
healthcheck:
  test: ["CMD", "dotnet", "--version"]
  interval: 30s
  timeout: 10s
  retries: 3
```

4. **???????????? reverse proxy (nginx) ??? metrics/monitoring**

---

## ?? ?????????????? ??????????

- [??????????? ???????????? Docker](https://docs.docker.com/)
- [.NET Docker ??????](https://hub.docker.com/_/microsoft-dotnet)
- [Docker Compose ????????????](https://docs.docker.com/compose/)
